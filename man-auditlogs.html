<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="assets/icon-man.png">
    <title>Audit Logs | Evento Admin</title>
    <link rel="stylesheet" href="css/man-dashboard.css">
    <link rel="stylesheet" href="css/man-auditlogs.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css">
</head>
<body>
    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle" id="mobileMenuToggle">
        <i class="fas fa-bars"></i>
    </button>

    <!-- Sidebar -->
    <nav class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <i class="fas fa-calendar-alt"></i>
                <h2>Evento <br>Admin</h2>
            </div>
        </div>

        <div class="user-profile">
            <div class="avatar">
                <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Admin" alt="Admin">
            </div>
            <div class="user-info">
                <h3>Admin User</h3>
                <p>System Administrator</p>
            </div>
        </div>

        <ul class="nav-menu">
            <li><a href="man-dashboard.html"><i class="fas fa-home"></i> Dashboard</a></li>
            <li><a href="man-userman.html"><i class="fas fa-users"></i> User Management</a></li>
            <li><a href="man-org.html"><i class="fas fa-user-tie"></i> Organizers</a></li>
            <li><a href="man-alleve.html"><i class="fas fa-calendar-check"></i> All Events</a></li>
            <li><a href="man-categories.html"><i class="fas fa-tags"></i> Categories</a></li>
            <li><a href="man-analytics.html"><i class="fas fa-chart-line"></i> System Analytics</a></li>
            <li><a href="man-reports.html"><i class="fas fa-file-alt"></i> Reports</a></li>
            <li><a href="man-transactions.html"><i class="fas fa-credit-card"></i> Transactions</a></li>
            <li><a href="man-settings.html"><i class="fas fa-sliders-h"></i> System Settings</a></li>
            <li><a href="man-auditlogs.html" class="active"><i class="fas fa-clipboard-list"></i> Audit Logs</a></li>
        </ul>

        <div class="sidebar-footer">
            <a href="#" class="quick-switch">
                <i class="fas fa-exchange-alt"></i>
                Switch to Organizer View
            </a>
            <div class="system-status">
                <div class="status-indicator online"></div>
                <span>System Online</span>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content" id="mainContent">
        <!-- Top Bar -->
        <header class="top-bar">
            <div class="page-title">
                <h1>Audit Logs</h1>
                <p id="currentDate">Monitor system activities and user actions</p>
            </div>
            
            <div class="top-actions">
                <div class="quick-search">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Search logs..." id="logsSearch">
                </div>
                <button class="action-btn" id="exportLogsBtn">
                    <i class="fas fa-file-export"></i>
                    <span>Export</span>
                </button>
                <button class="action-btn" id="refreshLogsBtn">
                    <i class="fas fa-sync-alt"></i>
                    <span>Refresh</span>
                </button>
                <button class="action-btn danger-btn" id="clearLogsBtn">
                    <i class="fas fa-trash"></i>
                    <span>Clear Old Logs</span>
                </button>
            </div>
        </header>
        <br> 
        <!-- Filters & Controls -->
        <div class="logs-controls">
            <div class="filters-section">
                <div class="filter-group">
                    <label for="logLevelFilter">Severity Level</label>
                    <select id="logLevelFilter" class="filter-select" multiple>
                        <option value="all" selected>All Levels</option>
                        <option value="info">Info</option>
                        <option value="warning">Warning</option>
                        <option value="error">Error</option>
                        <option value="critical">Critical</option>
                        <option value="security">Security</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label for="userFilter">User</label>
                    <select id="userFilter" class="filter-select">
                        <option value="all">All Users</option>
                        <option value="admin">Admin User</option>
                        <option value="system">System</option>
                        <option value="organizer">Organizers</option>
                        <option value="user">Regular Users</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label for="actionTypeFilter">Action Type</label>
                    <select id="actionTypeFilter" class="filter-select" multiple>
                        <option value="all" selected>All Actions</option>
                        <option value="login">Login/Logout</option>
                        <option value="create">Create</option>
                        <option value="update">Update</option>
                        <option value="delete">Delete</option>
                        <option value="read">View</option>
                        <option value="security">Security Event</option>
                        <option value="system">System Event</option>
                        <option value="payment">Payment</option>
                        <option value="api">API Call</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label for="moduleFilter">Module</label>
                    <select id="moduleFilter" class="filter-select" multiple>
                        <option value="all" selected>All Modules</option>
                        <option value="auth">Authentication</option>
                        <option value="users">User Management</option>
                        <option value="events">Events</option>
                        <option value="organizers">Organizers</option>
                        <option value="payments">Payments</option>
                        <option value="tickets">Tickets</option>
                        <option value="categories">Categories</option>
                        <option value="settings">Settings</option>
                        <option value="api">API</option>
                        <option value="system">System</option>
                    </select>
                </div>
            </div>
            
            <div class="date-filter-section">
                <div class="filter-group">
                    <label for="dateRange">Date Range</label>
                    <div class="date-range-picker">
                        <input type="text" id="dateRange" placeholder="Select date range">
                        <i class="fas fa-calendar-alt"></i>
                    </div>
                </div>
                
                <div class="filter-group">
                    <label for="timeFilter">Time</label>
                    <select id="timeFilter" class="filter-select">
                        <option value="all">All Time</option>
                        <option value="today">Today</option>
                        <option value="yesterday">Yesterday</option>
                        <option value="week">This Week</option>
                        <option value="month">This Month</option>
                        <option value="custom">Custom Range</option>
                    </select>
                </div>
                
                <button class="apply-filters-btn" id="applyFiltersBtn">
                    <i class="fas fa-filter"></i>
                    Apply Filters
                </button>
                <button class="clear-filters-btn" id="clearFiltersBtn">
                    <i class="fas fa-times"></i>
                    Clear All
                </button>
            </div>
        </div>
        
        <!-- Statistics Cards -->
        <div class="logs-statistics">
            <div class="stat-card">
                <div class="stat-icon info">
                    <i class="fas fa-info-circle"></i>
                </div>
                <div class="stat-content">
                    <h3 id="totalLogsCount">0</h3>
                    <p>Total Logs</p>
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon warning">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <div class="stat-content">
                    <h3 id="warningLogsCount">0</h3>
                    <p>Warnings</p>
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon error">
                    <i class="fas fa-times-circle"></i>
                </div>
                <div class="stat-content">
                    <h3 id="errorLogsCount">0</h3>
                    <p>Errors</p>
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon security">
                    <i class="fas fa-shield-alt"></i>
                </div>
                <div class="stat-content">
                    <h3 id="securityLogsCount">0</h3>
                    <p>Security Events</p>
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon user">
                    <i class="fas fa-user-clock"></i>
                </div>
                <div class="stat-content">
                    <h3 id="userActivityCount">0</h3>
                    <p>User Activities (24h)</p>
                </div>
            </div>
        </div>

        <!-- Logs Table -->
        <div class="logs-table-container">
            <div class="table-header">
                <div class="table-title">
                    <h3>System Audit Logs</h3>
                    <p>Showing <span id="showingCount">0</span> of <span id="totalCount">0</span> records</p>
                </div>
                <div class="table-controls">
                    <div class="pagination-info">
                        <span>Rows per page:</span>
                        <select id="rowsPerPage">
                            <option value="10">10</option>
                            <option value="25" selected>25</option>
                            <option value="50">50</option>
                            <option value="100">100</option>
                        </select>
                    </div>
                    <div class="pagination">
                        <button class="pagination-btn" id="firstPageBtn">
                            <i class="fas fa-angle-double-left"></i>
                        </button>
                        <button class="pagination-btn" id="prevPageBtn">
                            <i class="fas fa-angle-left"></i>
                        </button>
                        <span class="page-info">Page <span id="currentPage">1</span> of <span id="totalPages">1</span></span>
                        <button class="pagination-btn" id="nextPageBtn">
                            <i class="fas fa-angle-right"></i>
                        </button>
                        <button class="pagination-btn" id="lastPageBtn">
                            <i class="fas fa-angle-double-right"></i>
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="table-wrapper">
                <table class="logs-table" id="logsTable">
                    <thead>
                        <tr>
                            <th>
                                <input type="checkbox" id="selectAllLogs">
                            </th>
                            <th data-sort="timestamp">Timestamp <i class="fas fa-sort"></i></th>
                            <th data-sort="level">Level <i class="fas fa-sort"></i></th>
                            <th data-sort="user">User <i class="fas fa-sort"></i></th>
                            <th data-sort="action">Action <i class="fas fa-sort"></i></th>
                            <th data-sort="module">Module <i class="fas fa-sort"></i></th>
                            <th data-sort="description">Description</th>
                            <th data-sort="ip">IP Address <i class="fas fa-sort"></i></th>
                            <th data-sort="status">Status <i class="fas fa-sort"></i></th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="logsTableBody">
                        <!-- Logs will be populated here -->
                    </tbody>
                </table>
            </div>
            
            <div class="table-footer">
                <div class="selected-info">
                    <span id="selectedCount">0</span> logs selected
                </div>
                <div class="bulk-actions">
                    <select id="bulkActionSelect">
                        <option value="">Bulk Actions</option>
                        <option value="delete">Delete Selected</option>
                        <option value="export">Export Selected</option>
                        <option value="mark_read">Mark as Read</option>
                        <option value="mark_important">Mark as Important</option>
                    </select>
                    <button class="apply-bulk-btn" id="applyBulkActionBtn">Apply</button>
                </div>
            </div>
        </div>

        <!-- Log Details Modal -->
        <div class="modal-overlay" id="logDetailsModal">
            <div class="modal-content wide-modal">
                <div class="modal-header">
                    <h3>Log Details</h3>
                    <button class="modal-close" id="closeLogDetailsModal">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="log-details">
                        <div class="detail-section">
                            <h4>Basic Information</h4>
                            <div class="detail-grid">
                                <div class="detail-item">
                                    <label>Log ID:</label>
                                    <span id="detailLogId">LOG-2024-001</span>
                                </div>
                                <div class="detail-item">
                                    <label>Timestamp:</label>
                                    <span id="detailTimestamp">2024-01-15 14:30:25</span>
                                </div>
                                <div class="detail-item">
                                    <label>Severity:</label>
                                    <span class="log-level info" id="detailLevel">Info</span>
                                </div>
                                <div class="detail-item">
                                    <label>Status:</label>
                                    <span class="log-status success" id="detailStatus">Success</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="detail-section">
                            <h4>User & Session</h4>
                            <div class="detail-grid">
                                <div class="detail-item">
                                    <label>User:</label>
                                    <span id="detailUser">Admin User (admin@evento.com)</span>
                                </div>
                                <div class="detail-item">
                                    <label>User Role:</label>
                                    <span id="detailUserRole">Super Admin</span>
                                </div>
                                <div class="detail-item">
                                    <label>Session ID:</label>
                                    <span id="detailSessionId">sess_7890123456</span>
                                </div>
                                <div class="detail-item">
                                    <label>User Agent:</label>
                                    <span id="detailUserAgent">Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="detail-section">
                            <h4>Action Details</h4>
                            <div class="detail-grid">
                                <div class="detail-item full-width">
                                    <label>Action:</label>
                                    <span id="detailAction">User logged in</span>
                                </div>
                                <div class="detail-item full-width">
                                    <label>Module:</label>
                                    <span id="detailModule">Authentication</span>
                                </div>
                                <div class="detail-item full-width">
                                    <label>Description:</label>
                                    <p id="detailDescription">User successfully logged into the system using email and password</p>
                                </div>
                                <div class="detail-item">
                                    <label>IP Address:</label>
                                    <span id="detailIp">192.168.1.100</span>
                                </div>
                                <div class="detail-item">
                                    <label>Location:</label>
                                    <span id="detailLocation">New York, US</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="detail-section">
                            <h4>Additional Data</h4>
                            <div class="detail-item full-width">
                                <label>Request Data:</label>
                                <pre id="detailRequestData">{
    "email": "admin@evento.com",
    "timestamp": "2024-01-15T14:30:25Z"
}</pre>
                            </div>
                            <div class="detail-item full-width">
                                <label>Response Data:</label>
                                <pre id="detailResponseData">{
    "status": "success",
    "user_id": "usr_123456",
    "session_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9"
}</pre>
                            </div>
                        </div>
                        
                        <div class="detail-section">
                            <h4>Metadata</h4>
                            <div class="detail-grid">
                                <div class="detail-item">
                                    <label>Log Source:</label>
                                    <span id="detailSource">Web Application</span>
                                </div>
                                <div class="detail-item">
                                    <label>API Endpoint:</label>
                                    <span id="detailEndpoint">/api/v1/auth/login</span>
                                </div>
                                <div class="detail-item">
                                    <label>HTTP Method:</label>
                                    <span id="detailMethod">POST</span>
                                </div>
                                <div class="detail-item">
                                    <label>Response Time:</label>
                                    <span id="detailResponseTime">250ms</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="action-btn" id="exportLogDetailBtn">
                        <i class="fas fa-file-export"></i>
                        Export This Log
                    </button>
                    <button class="action-btn" id="copyLogIdBtn">
                        <i class="fas fa-copy"></i>
                        Copy Log ID
                    </button>
                    <button class="action-btn danger-btn" id="deleteLogDetailBtn">
                        <i class="fas fa-trash"></i>
                        Delete Log
                    </button>
                </div>
            </div>
        </div>

        <!-- Export Modal -->
        <div class="modal-overlay" id="exportModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Export Logs</h3>
                    <button class="modal-close" id="closeExportModal">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="exportForm">
                        <div class="form-group">
                            <label for="exportFormat">Export Format</label>
                            <select id="exportFormat" class="form-select">
                                <option value="csv">CSV</option>
                                <option value="json">JSON</option>
                                <option value="pdf">PDF</option>
                                <option value="excel">Excel</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="exportRange">Export Range</label>
                            <select id="exportRange" class="form-select">
                                <option value="current">Current View</option>
                                <option value="selected">Selected Items</option>
                                <option value="all">All Logs</option>
                                <option value="filtered">Filtered Results</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="exportFields">Fields to Include</label>
                            <div class="checkbox-list">
                                <div class="checkbox-item">
                                    <input type="checkbox" id="fieldTimestamp" checked>
                                    <label for="fieldTimestamp">Timestamp</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="fieldLevel" checked>
                                    <label for="fieldLevel">Level</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="fieldUser" checked>
                                    <label for="fieldUser">User</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="fieldAction" checked>
                                    <label for="fieldAction">Action</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="fieldModule" checked>
                                    <label for="fieldModule">Module</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="fieldDescription" checked>
                                    <label for="fieldDescription">Description</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="fieldIp" checked>
                                    <label for="fieldIp">IP Address</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="fieldStatus">
                                    <label for="fieldStatus">Status</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="exportFileName">File Name</label>
                            <input type="text" id="exportFileName" value="evento-audit-logs" placeholder="Enter file name">
                        </div>
                        
                        <div class="form-actions">
                            <button type="button" class="cancel-btn" id="cancelExportBtn">Cancel</button>
                            <button type="submit" class="export-btn">
                                <i class="fas fa-download"></i>
                                Export
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Live Logs Panel -->
        <div class="live-logs-panel" id="liveLogsPanel">
            <div class="panel-header">
                <h4>
                    <i class="fas fa-broadcast-tower"></i>
                    Live Logs Monitor
                    <span class="live-indicator"></span>
                </h4>
                <div class="panel-controls">
                    <button class="panel-btn" id="toggleLiveBtn">
                        <i class="fas fa-play"></i>
                        Start Live
                    </button>
                    <button class="panel-btn" id="clearLiveBtn">
                        <i class="fas fa-trash"></i>
                        Clear
                    </button>
                    <button class="panel-btn" id="collapsePanelBtn">
                        <i class="fas fa-chevron-down"></i>
                    </button>
                </div>
            </div>
            <div class="panel-body" id="liveLogsBody">
                <div class="live-log-entry">
                    <span class="log-time">14:30:25</span>
                    <span class="log-level info">INFO</span>
                    <span class="log-message">User 'admin' logged in successfully</span>
                </div>
                <div class="live-log-entry">
                    <span class="log-time">14:31:10</span>
                    <span class="log-level warning">WARN</span>
                    <span class="log-message">Failed login attempt for user 'john.doe'</span>
                </div>
                <div class="live-log-entry">
                    <span class="log-time">14:32:45</span>
                    <span class="log-level security">SECURITY</span>
                    <span class="log-message">Multiple failed login attempts detected from IP 192.168.1.100</span>
                </div>
            </div>
        </div>
    </main>

    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/moment@2.29.4/moment.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
    <script src="js/man-dashboard.js"></script>
    <script src="js/man-auditlogs.js"></script>
</body>
</html>